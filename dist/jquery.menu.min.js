!function(a){var b={};a.registerDropDownMenuSkin=function(a,c){b[a]=c},a.fn.swapClasses=function(a,b,c){var d=c?a:b,e=c?b:a;return this.hasClass(d)||this.addClass(d).removeClass(e),this};var c=function(a,b){a.swapClasses("hover","nohover",b)},d=function(a,b,c){if(1===a.nodeType&&b.call(a,a,c)!==!1)for(var e=0,f=a.childNodes.length;f>e;e++)d(a.childNodes[e],b,c)},e=function(b,c){var e=[];return b.each(function(){d(this,c,e)}),a(e)},f=function(b){var c=a.extend.apply({},arguments);for(var d in c)"function"==typeof b[d]&&"function"!=typeof c[d]&&(c[d]=a.noop);return c},g={showOnHover:!0,linksWithSubmenusEnabled:!1,selected:a.noop,beforeShowPanel:a.noop,beforeHidePanel:a.noop,showPanelComplete:a.noop,hidePanelComplete:a.noop,position:a.noop,skin:"basic"};a.fn.dropDownMenu=function(d){if(0===this.length)return this;var i=b[d.skin];if(!i)throw new Error("Invalid dropDownMenu skin: "+d.skin);var j=f({},g,i||{},d);j.showOnHover||(j.linksWithSubmenusEnabled=!1);var k=150,l=function(b){b.addClass("menu-item-top");var d=[],f={parent:null,children:[]},g=!1,i=!1,l=function(b,d){var h=this;this.$panel=b,this.$item=d||b.closest(".menu-item"),this.$parentPanel=this.$item.closest(".menu-panel"),this.isTopLevel=0===this.$parentPanel.length,this.parent=null,this.children=[],this.isOpen=!1,this.transitioning=!1,this.$panel&&this.$panel.data("PanelInstance",this);var l=function(){h.$item.addClass("menu-item-with-submenu"),h.$item.on("click touchstart",z),h.$item.hoverDelay({over:v,out:w,delayOver:h.isTopLevel&&!j.showOnHover?0:200,delayOut:500}),h.isTopLevel&&h.$item.on("mouseout",function(b){if(!h.isOpen){if(b.relatedTarget&&a(this).has(b.relatedTarget).length>0&&!a(this).is(b.relatedTarget))return;t(!1)}}),h.$panel&&(h.$panel.click(function(b){var c=a(b.target).closest(".menu-item",h.$panel);if(c&&!c.hasClass("menu-item-with-submenu")){var d=s(b);if(d.$selectedItem=c,d.selectedItem=c[0],j.selected.call(this,d),d.cancel)return b.stopPropagation(),void 0;if(!b.isDefaultPrevented())return;m(b)}b.stopPropagation()}),j.linksWithSubmenusEnabled||p().on("click",n))},n=function(a){a.preventDefault()},p=function(){return e(h.$item,function(b,c){return a(b).hasClass("menu-panel")?!1:("A"==b.tagName&&c.push(b),!0)})};this.resolveParent=function(){h.parent=h.$parentPanel.data("PanelInstance")||f,h.parent.children.push(h)};var q=null;this.getLevel=function(){if(null===q){q=-1;for(var a=h.parent;a;)a=a.parent,q++}return q};var r;this.getSiblings=function(){return r||(r=[],h.parent&&a.each(h.parent.children,function(){this!==h&&r.push(this)})),r};var s=function(a){return{$panel:h.$panel,panel:h,$parentPanel:h.$parentPanel,parentPanel:h.$parentPanel[0],$item:h.$item,item:h.$item[0],level:h.getLevel(),innerEvent:a,preventDefault:function(){this.cancel=!0}}},t=function(a){c(h.$item,a)},u=function(){return h.isTopLevel?g||j.showOnHover:!0},v=function(a){h.isTopLevel&&t(!0),u()&&h.show(a)},w=function(a){(!h.isTopLevel||j.showOnHover)&&u()&&h.hide(a)};this.show=function(c){if(!h.transitioning&&!h.isOpen){var d;h.$panel&&(d=s(c),j.beforeShowPanel.call(h,d),d.cancel)||(a.each(h.getSiblings(),function(){this.hide(c)}),o(c),t(!0),h.$panel&&(h.transitioning=!0,d=s(c),j.position(d),j.animationShow?j.animationShow.call(h,d,x):h.isTopLevel?(b.show(),x()):b.fadeIn(k,x)))}};var x=function(a){h.isOpen=!0,h.transitioning=!1,j.showPanelComplete.call(h,s(a))};this.hide=function(c){if(h.isOpen&&!h.transitioning){if(h.$panel){var d=s(c);if(j.beforeHidePanel.call(h,d),d.cancel)return}t(!1),h.$panel&&(h.transitioning=!0,a.each(h.children,function(){this.hide(c)}),j.animationHide?j.animationHide.call(h,s(c),y):h.isTopLevel?(b.hide(),y()):b.fadeOut(k,y))}};var y=function(a){h.isOpen=!1,h.transitioning=!1,j.hidePanelComplete.call(h,s(a))},z=function(b){var c=!1;if(h.$panel.length>0){var d=a(b.target).closest(".menu-panel");d.length>0&&d[0]===h.$panel[0]&&(c=!0)}return c?(b.stopPropagation(),void 0):("touchstart"==b.type&&(b.preventDefault(),b.stopPropagation()),h.transitioning||(h[h.isOpen?"hideClick":"showClick"](b),h.isTopLevel?i=!0:b.stopPropagation()),void 0)};this.showClick=function(a){h.isTopLevel&&(g=!0),h.show(a)},this.hideClick=function(a){h.isTopLevel&&(g=!1),h.hide(a)},this.hideForce=function(a){g=!1,h.hide(a)},l.apply(this)},m=function(b){i=!0,a.each(f.children,function(){this.hideForce(b)})},n=function(a){return i?(i=!1,void 0):(m(a),void 0)};h.push(m);var o=function(a){for(var b=0;b<h.length;b++)h[b]!==m&&h[b](a)};b.find(".menu-panel").each(function(){d.push(new l(a(this)))}),b.not(".menu-item-with-submenu").each(function(){d.push(new l(null,a(this)))}),a.each(d,function(){this.resolveParent()}),b.find(".menu-item").hover(function(){c(a(this),!0)},function(){c(a(this),!1)}).each(function(){c(a(this),!1)}),a(document).on("click",n)};return this.each(function(){var b=e(a(this),function(b,c){return a(b).hasClass("menu-item")?(c.push(b),!1):!0});l(b)}),this};var h=[]}(jQuery);